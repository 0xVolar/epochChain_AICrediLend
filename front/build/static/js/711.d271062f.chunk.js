"use strict";(self.webpackChunkai_credit_lending=self.webpackChunkai_credit_lending||[]).push([[711],{3711:(t,o,n)=>{n.r(o),n.d(o,{RiskPoolService:()=>s,default:()=>l});var r=n(7295),a=n(6283),e=n(4085),i=n(6742);const c=t=>({type:"riskPool/setRiskPoolLoading",payload:t});class s{constructor(){this.poolContract=null,this.contractAddress="0x123456789abcdef123456789abcdef123456789a"}async initContract(){try{const t=e.A.getSigner();if(!t)throw new Error("\u672a\u8fde\u63a5\u94b1\u5305");const o=["function getPoolBalance() view returns (uint256)","function distributeInterest(uint256 amount) returns (uint256, uint256)","function addPenaltyToPool(uint256 amount) returns (bool)","function compensateLender(address lender, uint256 amount) returns (bool)"];return this.poolContract=new r.NZ(this.contractAddress,o,t),!0}catch(t){return console.error("\u521d\u59cb\u5316\u98ce\u9669\u6c60\u5408\u7ea6\u5931\u8d25:",t),!1}}async getPoolBalance(){try{if(i.M.dispatch(c(!0)),this.poolContract||await this.initContract(),!this.poolContract)throw new Error("\u5408\u7ea6\u672a\u521d\u59cb\u5316");const t=await this.poolContract.getPoolBalance();return i.M.dispatch({type:"riskPool/updateRiskPoolInfo",payload:{totalBalance:a.ck(t)}}),i.M.dispatch(c(!1)),a.ck(t)}catch(t){throw console.error("\u83b7\u53d6\u98ce\u9669\u6c60\u4f59\u989d\u5931\u8d25:",t),i.M.dispatch(c(!1)),t}}calculateInterestDistribution(t){const o=a.g5(t),n=20n*o/100n,r=o-n;return{riskPoolAmount:a.ck(n),lenderAmount:a.ck(r)}}async addPenaltyToPool(t){try{if(this.poolContract||await this.initContract(),!this.poolContract)throw new Error("\u5408\u7ea6\u672a\u521d\u59cb\u5316");const o=await this.poolContract.addPenaltyToPool(a.g5(t));return await o.wait(),await this.getPoolBalance(),!0}catch(o){throw console.error("\u6dfb\u52a0\u7f5a\u91d1\u5230\u98ce\u9669\u6c60\u5931\u8d25:",o),o}}async compensateLender(t,o){try{if(this.poolContract||await this.initContract(),!this.poolContract)throw new Error("\u5408\u7ea6\u672a\u521d\u59cb\u5316");const n=await this.poolContract.compensateLender(t,a.g5(o));return await n.wait(),await this.getPoolBalance(),!0}catch(n){throw console.error("\u8865\u507f\u8d37\u6b3e\u4eba\u5931\u8d25:",n),n}}}const l=new s}}]);
//# sourceMappingURL=711.d271062f.chunk.js.map